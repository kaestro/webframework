# webframework

## 프로젝트 목적 다음 프로젝트는 기초적인 수준의 웹 프레임워크를 구현해보고, 이를 통해 내부의 동작에 대한 이해를 높이는 것을 목표로 합니다.
기초적인 웹 프레임워크의 기능은 다음과 같이 정리할 수 있습니다.

* http 요청 수신
* http 요청 파싱
* http 요청 라우팅(정적, 동적)
* 핸들러 실행
* 응답 생성
* 응답 전송

---

## 프로젝트 진행 계획

프로젝트은 다음과 같은 순서로 진행할 예정입니다.

1. http 요청 수신
    * TCP 연결을 수락하고 원시(raw) HTTP 요청 데이터를 수신하는 모듈을 작성합니다.
    * 해당 기능을 테스트하기 위해 http 요청을 발송하는 기능을 작성합니다.
    * 해당 기능을 테스트할 때 사용하는 발송 http 요청은 다음과 같은 항목들을 포함합니다.
        * method: GET, POST, PUT, DELETE
        * path: /, /users, /users/{id}
        * headers: Content-Type, Accept
        * body: text/plain, application/json

2. http 요청 파싱
    * http 요청을 파싱하는 모듈을 작성합니다.
    * 파싱에 성공한 뒤, 이를 저장할 다양한 방법에 대해 검토합니다.
        * 파싱된 요청을 바탕으로, 객체를 생성하여 관리하는 방안을 고려합니다.
        * 파싱된 요청을 바탕으로, 딕셔너리 형태로 관리하는 방안을 고려합니다.

3. http 요청 라우팅
    * 작성한 웹 프레임워크에 대한 라우팅 모듈을 작성합니다.
    * 라우팅 모듈은 다음과 같은 기능을 포함합니다.
        * 정적 라우팅: /, /users 와 같은 정적인 경로에 대한 라우팅
        * 동적 라우팅: /users/{id} 와 같이 변수를 포함하는 경로에 대한 라우팅

4. 핸들러 실행
    * 라우팅된 경로에 따라 적절한 핸들러를 실행하는 기능을 작성합니다.
    * 핸들러는 다음과 같은 형태를 가집니다.
        * 요청 객체를 인자로 받습니다.
        * 응답 객체를 반환합니다.

5. 응답 생성
    * 핸들러의 반환 값을 바탕으로 http 응답을 생성하는 기능을 작성합니다.
    * 응답은 다음과 같은 항목들을 포함합니다.
        * status code: 200, 404, 500 등
        * headers: Content-Type, Content-Length 등
        * body: text/plain, application/json

6. 응답 전송
    * 생성된 http 응답을 클라이언트에게 전송하는 기능을 작성합니다.
    * 수신 성공을 확인하기 위한 e2e 테스트를 작성합니다.
    * e2e 테스트는 웹 프레임워크를 실행하고, http 요청을 전송하여 응답을 확인합니다.
    * 응답 확인은 다음과 같은 항목들을 포함합니다.
        * status code
        * headers
        * body

해당 기능에 대한 구현을 완료한 뒤에는, 현업에서 사용되는 오픈소스 웹 프레임워크들에
대한 분석을 진행합니다.

---

## 확장 계획

기초적인 요청을 파싱하는 것을 넘어서, 현대적인 웹 프레임워크들에서 갖추고 있는 기능들
에는 다음과 같은 것들이 있습니다:

0. 미들웨어 (Middleware)
* 목적: 요청과 응답 처리 과정의 중간에서 동작하는 함수들을 추가하여, 로깅, 인증, 권한
검사, 데이터 압축 등의 횡단 관심사(cross-cutting concerns)를 효율적으로 처리합니다.
* 설명: HTTP 요청이 핸들러에 도달하기 전이나, 핸들러에서 응답이 생성된 후 응답이
클라이언트에게 전송되기 전에 특정 작업을 수행할 수 있도록 합니다. 체인 형태로 여러
미들웨어를 등록하여 순차적으로 실행될 수 있게 구성할 수 있습니다.
* 관련 기존 기능: HTTP 요청 수신, HTTP 요청 파싱, 핸들러 실행, 응답 생성, 응답 전송.
(전반적인 요청/응답 처리 흐름에 개입)
1. 정적 파일 서빙 (Static File Serving)
* 목적: 이미지, CSS, JavaScript 파일과 같은 정적 자산을 효율적으로 클라이언트에게 제공합니다.
* 설명: 특정 URL 경로(예: /static/)로 들어오는 요청을 웹 서버의 특정 디렉토리(예:
static/)에 매핑하여 파일을 직접 응답으로 전송하는 기능을 추가합니다.
* 관련 기존 기능: HTTP 요청 라우팅, 응답 생성 및 전송.
2. 세션 관리 (Session Management)
* 목적: 클라이언트(브라우저)와 서버 간의 상태를 유지하여 사용자 로그인 상태, 장바구니
정보 등을 여러 요청에 걸쳐 유지할 수 있도록 합니다.
* 설명: 클라이언트에게 고유한 세션 ID를 발급(주로 쿠키를 통해)하고, 서버는 이 세션 ID와
연결된 데이터를 저장하여 클라이언트의 상태를 기억하는 기능을 구현합니다.
* 관련 기존 기능: HTTP 요청 파싱 (쿠키 파싱), 응답 생성 (쿠키 설정).
3. 템플릿 엔진 연동 (Templating Engine Integration)
* 목적: 서버 측에서 동적으로 HTML 페이지를 생성하여 클라이언트에게 전송합니다.
* 설명: Jinja2와 같은 템플릿 엔진을 연동하여, 핸들러에서 데이터를 전달하면 템플릿
엔진이 데이터를 HTML 템플릿에 삽입하여 최종 HTML 문자열을 생성하고 이를 응답 본문으로
전송하는 기능을 추가합니다.
* 관련 기존 기능: 핸들러 실행, 응답 생성.
4. 오류 처리 및 예외 관리 (Error Handling and Exception Management)
* 목적: 웹 프레임워크 내부에서 발생하는 예외나 오류를 사용자 친화적인 방식으로 처리하고,
적절한 HTTP 상태 코드와 메시지를 포함하는 응답을 반환합니다.
* 설명: 라우팅 실패 시 404 응답, 핸들러 실행 중 오류 발생 시 500 응답 등 특정 오류 상황에
대한 전역적인 핸들러를 등록하고 실행하는 기능을 구현합니다.
* 관련 기존 기능: HTTP 요청 라우팅, 핸들러 실행, 응답 생성.
5. 폼 데이터 파싱 및 유효성 검사 (Form Data Parsing and Validation)
* 목적: HTML 폼을 통해 전송된 데이터를 쉽게 파싱하고, 그 데이터의 유효성을 검사합니다.
* 설명: POST 요청 시 application/x-www-form-urlencoded 또는 multipart/form-data
타입으로 전송되는 데이터를 파싱하여 핸들러에서 쉽게 접근할 수 있도록 지원합니다. 또한,
특정 필드에 대한 유효성 검사 규칙을 정의하고 적용하는 기능을 추가할 수 있습니다.
* 관련 기존 기능: HTTP 요청 파싱 (특히 POST 요청 본문 파싱).
6. 비동기 요청 처리 (Asynchronous Request Handling)
* 목적: 동시성 및 확장성을 향상시키기 위해 비동기적으로 요청을 처리합니다.
* 설명: async/await 패턴 또는 ASGI (Asynchronous Server Gateway Interface)와 같은
비동기 방식을 도입하여, I/O 작업 대기 중에도 다른 요청을 처리할 수 있도록 프레임워크를
개선합니다. 이는 프레임워크의 성능을 크게 향상시킬 수 있습니다.
* 관련 기존 기능: HTTP 요청 수신, 핸들러 실행, 응답 전송.
7. 설정 관리 (Configuration Management)
* 목적: 웹 프레임워크 및 애플리케이션의 다양한 설정을 체계적으로 관리합니다.
* 설명: 개발/운영 환경에 따른 포트 번호, 디버그 모드 활성화 여부 등 다양한 설정 값을
별도의 파일(예: .ini, .json)이나 환경 변수에서 불러와 관리할 수 있도록 지원합니다.
* 관련 기존 기능: 프레임워크 전반에 걸쳐 영향을 미침.
8. 로깅 시스템 통합 (Logging System Integration)
* 목적: 애플리케이션의 동작 상태, 오류, 사용자 활동 등을 기록하여 디버깅, 모니터링, 보안
분석에 활용합니다.
* 설명: 파이썬의 logging 모듈과 같은 표준 로깅 시스템을 통합하여 프레임워크 내에서
발생하는 이벤트를 체계적으로 기록하고, 로그 레벨 설정 및 로그 출력 대상을 지정할 수 있도록 합니다.
* 관련 기존 기능: 프레임워크 전반에 걸쳐 영향을 미침.

위에 기능들의 일부들에 대한 기능들의 추가를 통해 확장성에 대해 검토합니다.
